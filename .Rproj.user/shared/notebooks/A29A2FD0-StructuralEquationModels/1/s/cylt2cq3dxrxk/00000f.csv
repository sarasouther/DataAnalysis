"0","library(lavaan)"
"0",""
"0","# Create simulated dataset"
"0","group_df <- data.frame("
"0","  site = rep(c(""A"", ""B""), each = 50),"
"0","  x = rnorm(100),"
"0","  m = rnorm(100),"
"0","  y = rnorm(100)"
"0",")"
"0",""
"0","# Define a simple SEM model"
"0","sem_model <- '"
"0","  m ~ a*x"
"0","  y ~ b*m + c*x"
"0","'"
"0",""
"0","# Fit multi-group SEM"
"0","fit_multi <- lavaan::sem(sem_model, data = group_df, group = ""site"")"
"2","G2;H2;Warningh: lavaan->lavParTable():  
   using a single label per parameter in a multiple group setting implies imposing equality constraints 
   across all the groups; If this is not intended, either remove the label(s), or use a vector of labels 
   (one for each group); See the Multiple groups section in the man page of model.syntax.g
"
"0","# View summary"
"0","summary(fit_multi, fit.measures = TRUE, standardized = TRUE)"
"1","lavaan 0.6-19 ended normally after 15 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        14
  Number of equality constraints                     3

  Number of observations per group:                   
    A                                               50
    B                                               50

Model Test User Model:
                                                      
  Test statistic                                 1.465
  Degrees of freedom                                 3
  P-value (Chi-square)                           0.690
  Test statistic for each group:
    A                                            0.717
    B                                            0.748

Model Test Baseline Model:

  Test statistic                                 3.494
  Degrees of freedom                                 6
  P-value                                        0.745

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    1.000
  Tucker-Lewis Index (TLI)                      -0.225

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)               -285.919
  Loglikelihood unrestricted model (H1)       -285.187
                                                      
  Akaike (AIC)                                 593.839
  Bayesian (BIC)                               622.496
  Sample-size adjusted Bayesian (SABIC)        587.755

Root Mean Square Error of Approximation:

  RMSEA                                          0.000
  90 Percent confidence interval - lower         0.000
  90 Percent confidence interval - upper         0.180
  P-value H_0: RMSEA <= 0.050                    0.730
  P-value H_0: RMSEA >= 0.080                    0.217

Standardized Root Mean Square Residual:

  SRMR                                           0.040

Parameter Estimates:

  Standard errors                             Standard
  Information                                 Expected
  Information saturated (h1) model          Structured


Group 1 [A]:

Regressions:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
  m ~                                                                   
    x          (a)   -0.059    0.093   -0.635    0.526   -0.059   -0.064
  y ~                                                                   
    m          (b)    0.135    0.112    1.202    0.229    0.135    0.121
    x          (c)    0.060    0.105    0.569    0.569    0.060    0.058

Intercepts:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
   .m                -0.101    0.145   -0.698    0.485   -0.101   -0.099
   .y                -0.008    0.161   -0.050    0.960   -0.008   -0.007

Variances:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
   .m                 1.044    0.209    5.000    0.000    1.044    0.996
   .y                 1.274    0.255    5.000    0.000    1.274    0.983


Group 2 [B]:

Regressions:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
  m ~                                                                   
    x          (a)   -0.059    0.093   -0.635    0.526   -0.059   -0.063
  y ~                                                                   
    m          (b)    0.135    0.112    1.202    0.229    0.135    0.118
    x          (c)    0.060    0.105    0.569    0.569    0.060    0.055

Intercepts:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
   .m                -0.262    0.126   -2.074    0.038   -0.262   -0.293
   .y                 0.180    0.147    1.226    0.220    0.180    0.176

Variances:
                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all
   .m                 0.794    0.159    5.000    0.000    0.794    0.996
   .y                 1.031    0.206    5.000    0.000    1.031    0.984

"
"0","# Fit unconstrained multi-group model"
"0","fit_multi <- sem(sem_model, data = group_data, group = ""site"")"
